---
title: "WPE WebKit 2.48 highlights"
author: csaavedra
permalink: /blog/2025-04-11-wpewebkit-2.48.html
preview: A review of the most significant changes in WPE WebKit 2.48
thumbnail: /assets/img/logo-black.svg
---

The WPE WebKit team has been working hard during the past six months and has recently released version 2.48 of the WPE port of WebKit. As is now tradition, here is an overview of the most important changes in this new stable release series.

## Graphics and Rendering

The work on the graphics pipeline of WebKit continues, and a lot of improvements, refactorings, bug fixes, and optimizations have happened under the hood. These changes bring both performance and rendering improvements, and are too many to list individually. Nonetheless, there are a number of  interesting changes.

### GPU Worker Threads

When GPU rendering with Skia is in use, tiles will be rendered in worker threads, which has a positive impact on performance. Threads were already used when using the CPU for rendering. Note that GPU usage for rendering is not yet the default in the WPE port, but may be enabled setting `WEBKIT_SKIA_ENABLE_CPU_RENDERING=0` in the environment before running programs that use WPE WebKit.

### Canvas Improvements

The [CanvasRenderingContext2D](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D) `putImageData()` and `getImageData()` methods have been optimized by preventing unnecessary buffer copies, resulting in improved performance and reduced memory usage.

### CSS 3D Transforms

There have been several improvements handling elements that use `preserve-3d` [CSS transforms](https://developer.mozilla.org/en-US/docs/Web/CSS/transform). On top of a modest performance improvement, the changes fixed rendering issues, making the implementation compliant with the specification.

### Damage Tracking

This release gained experimental support for collecting “damage” information, which tracks which parts of Web content produce visual changes in the displayed output. This information is then taken into account to reuse existing graphics buffers and repaint only those parts that need to be modified. This results better performance and less resource usage.

Note that this feature is disabled by default and may be previewed toggling the `PropagateDamagingInformation` feature flag.

### GPU Process Beginnings

A new “GPU process” is now always built, but its usage is disabled by default at runtime. This is an experimental feature that can be toggled via the `UseGPUProcessForWebGL` feature flag, and as the name implies at the moment this new auxiliary process only supports handling WebGL content.

The GPU process is a new addition to WebKit's multiprocess model, in which isolated processes are responsible for different tasks: the GPU process will eventually be in charge of most tasks that make use of the graphics processing unit, in order to improve security by separating graphics handling from Web content and data access. At the same time, graphics-intensive work does not interfere with Web content handling, which may bring potential performance improvements in the future.


## Multimedia

The [MediaRecorder](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder/MediaRecorder) backend gained support for the WebM format and audio bitrate configuration. WebM usage requires GStreamer 1.24.9 or newer.

Video handling using the [WebCodecs API](https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API) no longer ignores the `prefer-hardware` option. It is used as a hint to attempt using hardware-accelerated GStreamer components. If that fails, software based codecs will be used as fallback.

The [Web Speech API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API) gained a new synthesis backend, using [libspiel](https://project-spiel.org/). The existing [FLite](http://www.festvox.org/flite/)-based backend is still chosen by default because the dependency is readily available in most distributions, but setting `USE_SPIEL=ON` at build time is recommended where `libspiel` may be available.

The GStreamer-GL sink can now handle DMA-BUF memory buffers, replacing the DMA-BUF sink in this way.

## API Changes

The JavaScriptCore GLib API has a new [jsc_value_new_promise()](https://wpewebkit.org/reference/2.48.0/wpe-javascriptcore-2.0/ctor.Value.new_promise.html) function to create [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) objects from native code.

### WPE Platform library

The WPEPlatform library is a completely new API which changes how WPE embedding API works. The aim is to make *both* developing WPE backends and user applications more approachable and idiomatic using GLib and GObject conventions. Inspiration has been drawn from the [Cog](https://github.com/Igalia/cog) API. A preview version is shipped along in 2.48, and as such it needs to be explicitly enabled at build time with `ENABLE_WPE_PLATFORM=ON`. The API may still change and applications developed using WPEPlatform are likely to need changes with future WPE WebKit releases. 


## Web Platform

The list of Web Platform features that are newly available in 2.48 is considerably long, and includes the following highlights:

* JavaScript [regular expression modifier flags](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions#advanced_searching_with_flags).
* The [Compression Streams API](https://developer.mozilla.org/en-US/docs/Web/API/Compression_Streams_API).
* The [URLPattern API](https://developer.mozilla.org/en-US/docs/Web/API/URLPattern/URLPattern).
* Cross-document [view transitions](https://developer.mozilla.org/en-US/docs/Web/API/View_Transition_API), and many improvements overall to the View Transitions support.
* The [Web Components API](https://developer.mozilla.org/en-US/docs/Web/API/Web_components) gained support for [CustomElementRegistry](https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry).
* The [shape()](https://developer.mozilla.org/en-US/docs/Web/CSS/basic-shape/shape) CSS function.
* Support CSS `width` and `height` properties on MathML elements.
* Support CSS `writing-mode: sideways-lr`.
* Support scroll-to-[text-fragment](https://developer.mozilla.org/en-US/docs/Web/URI/Fragment/Text_fragments).

Some new functionality may disabled by default, but testable after toggling the corresponding feature flag.

* [FileSystemWritableFileStream](https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream) is available behind the flag of the same name.
* Support for CSS `progress()`, `media-progress()` and `container-progress()` functions&mdash;all part of the CSS, behind runtime flags `CSSMediaProgressFunction` and `CSSContainerProgressFunction`, respectively.

## Packaging

The Web Inspector resources are no longer built into a shared library, but as a [GResource](https://docs.gtk.org/gio/struct.Resource.html) bundle file. This avoids usage of the dynamic linker and allows mapping the file in memory, which brings improved resource usage.

Packagers and distributors might need some adaptation of their build infrastructure in cases where the Web Inspector resources have some ad-hoc handling. Typical cases are avoiding installation in production builds for embedded devices, or as an optional component for development builds. 

For example, using the default build configuration, the file with the resources inside the installation prefix will be `share/wpe-webkit-2.0/inspector.gresource`, instead of the old `lib/wpe-webkit-2.0/libWPEWebInspectorResources.so` library. 

## Other Noteworthy Changes

* The minimum required ICU version is now 70.1.
* Reading of Remote Web Inspector protocol messages was optimized, resulting in a considerable speed-up for large messages.

The WPE WebKit team is already working on the 2.50 release, which is planned for September. In the meantime, you can expect stable updates for the 2.48 series through the usual channels.
