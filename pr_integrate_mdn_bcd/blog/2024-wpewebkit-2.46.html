<!DOCTYPE html>
<html prefix="og: https://ogp.me/ns#" lang="en">

  <head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="">

  <title>WPE WebKit 2.46 highlights</title>
  <link rel="canonical" href="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/blog/2024-wpewebkit-2.46.html">
  <link rel="alternate" type="application/rss+xml" title="WPE WebKit Blog" href="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/blog.xml">
  <link rel="alternate" type="application/rss+xml" title="WPE WebKit Posts" href="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/feed.xml">
  <link rel="alternate" type="application/rss+xml" title="WPE WebKit Security Advisories" href="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/security.xml">
  <meta property="og:url" content="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/blog/2024-wpewebkit-2.46.html">
  <meta property="og:title" content="WPE WebKit 2.46 highlights">
  <meta property="og:image" content="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/assets/twitter_Profile_WhiteBg_400px.png">
  <meta property="og:image:secure_url" content="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/assets/twitter_Profile_WhiteBg_400px.png">
  <meta property="og:image:alt" content="WPE logo">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="400">
  <meta property="og:image:height" content="400">
  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2024-10-07T00:00:00.000Z">
  <meta property="article:tag" content="blogpost">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@WPEWebKit">

  <!-- CSS v2 -->
  <link rel="stylesheet" href="/wpewebkit.org/pr_integrate_mdn_bcd/css/v2.css">

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="/wpewebkit.org/pr_integrate_mdn_bcd/vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/wpewebkit.org/pr_integrate_mdn_bcd/css/fonts.css">

  <!-- Code syntax highlighting -->
  <link rel="stylesheet" href="/wpewebkit.org/pr_integrate_mdn_bcd/css/prism.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/wpewebkit.org/pr_integrate_mdn_bcd/css/stylish-portfolio.css">
  <script type="text/javascript">
    window.addEventListener('load',function() {document.querySelector('nav.global>div>.burger').addEventListener('click',menutog)});
    function menutog(e) {
      document.querySelector('nav.global>div>ul').classList.toggle('off');
      e.preventDefault();
    }
  </script>
  <!-- Matomo -->
  <script type="text/javascript">
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//stats.igalia.com/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '6']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>


  <body id="page-top" class="subpage">

    <nav class="global">
	<div>
		<a class="igalia logo home" href="/wpewebkit.org/pr_integrate_mdn_bcd/"><img src="/wpewebkit.org/pr_integrate_mdn_bcd/assets/img/logo-blue.svg" alt="WPE"></a>
		<ul class="blog off"><li>
			<a class="nav-link" href="/wpewebkit.org/pr_integrate_mdn_bcd/">Home</a>
			</li><li>
			<a class="nav-link" href="/wpewebkit.org/pr_integrate_mdn_bcd/about/">Learn & Discover</a>
			</li><li class="currentPage">
			<a class="nav-link" href="/wpewebkit.org/pr_integrate_mdn_bcd/blog/">Blog</a>
			</li><li>
			<a class="nav-link" href="/wpewebkit.org/pr_integrate_mdn_bcd/developers/">Developers</a>
			</li><li>
			<a class="btn cta" href="/wpewebkit.org/pr_integrate_mdn_bcd/about/get-wpe.html">Get WPE</a>
			</li></ul>
		<a href="#" class="burger">Menu</a>
	</div>
</nav>


    <main>
    <style>
header.page h1 {
	margin-bottom: 0.33em;
	line-height: 1;
}
header.page time {
	font-size: 1.25em;
	opacity: 0.67;
}
header.page .btn-xl {
	padding: 1em 2em;
  margin-left: 0.5em;
}
</style>
<div itemscope="" itemtype="http://schema.org/TechArticle">
<meta itemprop="creativeWorkStatus" content="Published">
<meta itemprop="isAccessibleForFree" content="True">
<meta itemprop="publisher" content="WPE Team">
<meta itemprop="author" content="WPE Team">
<meta itemprop="url" content="https://igalia.github.io/wpewebkit.org/pr_integrate_mdn_bcd/blog/2024-wpewebkit-2.46.html">

<header class="page full-bleed">
 <h1 itemprop="headline">WPE WebKit 2.46 highlights</h1>
 
   <meta itemprop="datePublished" content="Mon Oct 07 2024">
   <time itemprop="dateCreated"> 7 October 2024</time>
 
  
</header>

<div itemprop="articleBody">

<p>A couple of weeks ago, the WPE WebKit team released version 2.46. This is an important milestone for the project as, for the first time in a stable series, the Skia backend takes over rendering. Skia brings significant improvements to the graphics stack, so we are very happy for this release. The list of changes goes beyond graphics, and it’s not short of awesome, so let’s have a look to what’s new!</p>
<h3 id="cairo-is-out%2C-skia-is-in" tabindex="-1">Cairo is out, Skia is in</h3>
<p>We <a href="https://blogs.igalia.com/carlosgc/2024/02/19/webkit-switching-to-skia-for-2d-graphics-rendering/">announced</a> some time ago that a new rendering backend with <a href="https://skia.org">Skia</a> was on the works and that it would eventually replace Cairo. 2.46 the first release series where Skia is used, bringing important improvements in rendering and performance.</p>
<p>While Skia can use a GPU for rendering, our testing with common embedded SoCs has shown that the way WPE WebKit works may result in slightly worse performance in some cases than letting Skia use the CPU. Hence, for the 2.46 releases the latter is the default, while development continues to improve GPU usage on low-powered devices with the ultimate goal of making accelerated rendering the default choice in all cases.</p>
<p>The Cairo backend is still present and will be selected automatically at build time for big-endian architectures, where Skia is not yet supported. We plan to remove support for Cairo in the near future, and this approach allows us to ship the new renderer while solving the remaining issues. At any rate, the Cairo renderer is no longer receiving active development.</p>
<p>It is important to notice that it is recommended to build WPE with Clang instead of GCC. This comes from upstream Skia; see their <a href="https://skia.org/docs/user/build/#supported-and-preferred-compilers">supported and preferred compilers page</a> for details.</p>
<h3 id="graphics-stack-revamped" tabindex="-1">Graphics stack revamped</h3>
<p>Tha switch to Skia has made possible a significant number of changes and improvements in the WebKit graphics stack. These changes relate to accelerated canvas, accelerated CSS filters, color spaces, and more. <a href="https://blogs.igalia.com/carlosgc/2024/09/27/graphics-improvements-in-webkitgtk-and-wpewebkit-2-46/">Carlos García has written extensively about these changes</a> in his blog, we recommend reading his article for more details.</p>
<h3 id="trace-point-profiling-with-sysprof" tabindex="-1">Trace point profiling with sysprof</h3>
<p>Sysprof is a profiling and performance analysis tool for Linux. Thanks to integration with <code>libsysprof-capture</code>, it is now possible to use Sysprof to record trace points to do profiling and performance analysis of WebKit internals. This is a major improvement that will allow us to more effectively analyze the code paths that are more performance-sensitive and find ways to optimize them. It will also allow vendors to profile their specific hardware configurations and specific use-cases as well.</p>
<p>For a more in-depth presentation of the integration with Sysprof, please read <a href="https://feaneron.com/2024/07/12/profiling-a-web-engine/">Georges Stavacras’ blog post on the topic</a>.</p>
<h3 id="api-changes" tabindex="-1">API changes</h3>
<h4 id="additions" tabindex="-1">Additions</h4>
<ul>
<li><a href="https://webkitgtk.org/reference/webkitgtk/unstable/method.Settings.apply_from_key_file.html"><code>webkit_settings_apply_from_key_file()</code></a> allows applying WebKit settings directly from a key file</li>
<li>The console message API, which had been previously deprecated, has been brought to the current API</li>
<li><a href="https://webkitgtk.org/reference/webkitgtk/2.46.0/signal.AutomationSession.will-close.html"><code>WebKitAutomationSession::will-close</code></a> signal, which allows clients to perform cleanup tasks before an automation session is closed</li>
<li><a href="https://webkitgtk.org/reference/webkitgtk/2.46.0/property.Settings.enable-2d-canvas-acceleration.html"><code>enable-2d-canvas-acceleration</code></a> WebSetting can be used to control 2D-canvas acceleration in Skia-enabled builds</li>
<li><code>webkit_web_view_toggle_inspector()</code> shows or hides the web inspector for a given webview (only available with the WPE platform API)</li>
</ul>
<h4 id="deprecations" tabindex="-1">Deprecations</h4>
<ul>
<li><code>WebKitWebView::insecure-content-detected</code> signal.</li>
<li><code>WebKitWebContext:use-system-appearance-for-scrollbars</code> property.</li>
<li><code>webkit_web_context_set_use_system_appearance_for_scrollbars()</code> and <code>webkit_web_context_get_use_system_appearance_for_scrollbars()</code>.</li>
</ul>
<h3 id="gstreamer-customizations" tabindex="-1">GStreamer customizations</h3>
<p>Compile-time platform-specific GStreamer customizations are now done at runtime, using the <code>WEBKIT_GST_QUIRKS</code> and <code>WEBKIT_GST_HOLE_PUNCH_QUIRK</code> environment variables. Setting their value to <code>help</code> will return a help message with the possible values to <code>stderr</code>. A list of the removed CMake defines:</p>
<ul>
<li><code>USE_GSTREAMER_NATIVE_VIDEO</code></li>
<li><code>USE_GSTREAMER_NATIVE_AUDIO</code></li>
<li><code>USE_GSTREAMER_TEXT_SINK</code></li>
<li><code>USE_GSTREAMER_HOLEPUNCH</code></li>
<li><code>USE_WPEWEBKIT_PLATFORM_WESTEROS</code></li>
<li><code>USE_WPEWEBKIT_PLATFORM_BCM_NEXUS</code></li>
<li><code>USE_WPEWEBKIT_PLATFORM_AMLOGIC</code></li>
<li><code>USE_WPEWEBKIT_PLATFORM_RPI</code></li>
<li><code>USE_WPEWEBKIT_PLATFORM_BROADCOM</code></li>
<li><code>USE_WESTEROS_SINK</code></li>
</ul>
<h3 id="web-platform-changes" tabindex="-1">Web Platform changes</h3>
<p>The changes to supported Web Platform features between releases of WebKit are always substantial, and for that reason listing all of those changes here would be a major endeavour. The following is an incomplete list of some of the features that have been enabled, removed, and marked in preview state since 2.44, in no particular order:</p>
<ul>
<li>CSS Container/Style Queries</li>
<li>CSS <code>text-wrap-style</code></li>
<li>CSS <code>background-clip: border-area</code></li>
<li>CSS <code>text-underline-position: left|right</code></li>
<li>CSS <code>scrollbar-width</code></li>
<li>CSS View Transitions</li>
<li>CSS Grid Masonry layout (preview)</li>
<li>CSS <code>::target-text</code> pseudo element</li>
<li>WebCrypto X25519 algorithm (preview)</li>
<li>AppCache support has been removed</li>
<li>New <code>Promise.try()</code> method</li>
<li>New <code>Observable</code> methods, like <code>.map()</code> and <code>.filter()</code></li>
</ul>
<h3 id="other-noteworthy-changes" tabindex="-1">Other noteworthy changes</h3>
<ul>
<li>Suport for the WebP image format is now always enabled.</li>
<li>WebDriver clients may now connect to an already running process, instead of always needing to spawn a new one.</li>
<li>The <code>gst-libav</code> AAC decoders are now disabled due to outstanding bugs. Distributors are encouraged to use the GStreamer FDK AAC decoder (part of <code>gst-plugins-bad</code>) instead.</li>
</ul>
<h3 id="and-much-more!" tabindex="-1">And much more!</h3>
<p>WebKit evolves and changes a lot between major stable releases. Listing all changes would not be possible. There are countless bug fixes, performance improvements, new web features supported, and so on. We recommend checking the <a href="https://wpewebkit.org/release/">release notes</a> and the git log for more details.</p>
<p>The WPE WebKit team is already working on the 2.48 release, schedule for early next year. Until then!</p>



<section class="content-section bg-light small-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto text-muted text-left align-text-top">
        <hr class="author-line">
        <div class="card">
          <span>
            This article was written by <a href="https://www.igalia.com/team/csaavedra">Claudio Saavedra</a>. <br><br>Claudio is long-time WebKit contributor from Igalia, working in different areas of WebKit, WPE, and the stack around it.
          </span>
        </div>
      </div>
    </div>
  </div>
</section>



</div>

    <div class="survey">
    <p>
    If you’re using WPE WebKit, or are considering doing so, <strong><a href="https://docs.google.com/forms/d/e/1FAIpQLSchPgMGzuVc9ry5bdxF2uFnW2q3FcrSSqxJdOM4Fd2BD4s7dg/viewform?usp=pp_url&amp;entry.1179679285=WPEWebKit.org+website">please take our brief user survey</a></strong>. Your input will help us make WPE WebKit better for you!
    </p>
    </div>
    <style>
    .survey {
    position: relative;
    padding-block: 2em 3em;
    margin-block: 3em 0;
    --bgrad: linear-gradient(180deg,#00C6 0.25em,#00B4 20%,40%,#00B2);
    background: var(--bgrad);
    border-image: var(--bgrad) 1;
    border-image-outset: 0 50vmax;
    border-image-width: 0 50vmax;
    font-size: 1.25em;
    }
    .survey::before {
    content: url(/assets/img/survey.svg);
    position: absolute;
    top: -1.5em;
    left: 0;
    right: 0;
    margin-inline: auto;
    height: 3em;
    width: auto;
    aspect-ratio: 1/1;
    filter: drop-shadow(0.25em 0.33em 0.33em #0006);
    }
    .survey p {
    padding-inline: 1em;
    }
    </style>

    </div></main>

    <dialog id="splash">
<p>If you’re using WPE WebKit, or are considering doing so, <strong>please take our brief user survey!</strong> Your input will help us make WPE WebKit better for you.</p>
<div>
<button is="dis-misser" id="dismiss-Y">Yes</button>
<button is="dis-misser" id="dismiss-L">Ask again later</button>
<button is="dis-misser" id="dismiss-N">No</button>
</div>
</dialog>
<style>
#splash {max-width: 50%; border-radius: 1em; padding-inline: 2em; outline: 50vmax solid #141316D0; background: #EEE;}
#splash p {font-size: 1.25em; color: inherit;}
#splash img {max-width: 60vw; max-height: 50vh; aspect-ratio: 1.88/1;}
@media (max-width: 600px) {
	#splash img {object-fit: contain; object-position: 100% 100%;}
}
#splash div {margin-block: 1em 1.5em; text-align: center; display: flex; gap: 1em; justify-content: center;}
#splash button {font-size: 1.33em; border-radius: 1em; padding-inline: 0.75em; padding-block: 0.2em; border: 0; background: #888; color: #EEE; cursor: pointer;}
#splash button:focus {outline: 0.25em solid black;}
#splash button#dismiss-Y {background: hsl(205deg 84.8% 50%);}
#splash button#dismiss-L {background: hsl(102.5deg 15.2% 50%);}
#splash button#dismiss-N {background: hsl(0deg 84.8% 50%);}
</style>
<footer class="global">
	<b></b>
	<div>
		<a href="/wpewebkit.org/pr_integrate_mdn_bcd/" class="igalia logo home"><img src="/wpewebkit.org/pr_integrate_mdn_bcd/assets/img/logo-white.svg" alt="WPE"></a>
		<ul>
			<li>Connect on <a rel="me" href="https://floss.social/@WPEWebKit">Mastodon</a>, <a href="https://bsky.app/profile/wpewebkit.org">Bluesky</a></li>
			<li>mailing list: <a href="https://lists.webkit.org/mailman/listinfo/webkit-wpe">webkit-wpe</a></li>
			<li>OFTC: <a href="https://webchat.oftc.net/?channels=wpe">#wpe</a></li>
			<li>Matrix: <a href="https://matrix.to/#/#wpe:matrix.org">#wpe:matrix.org</a></li>
		</ul>
		<ul>
			<li>Copyright &copy; 2018-2025 The WPE WebKit Team.</li>
			<li>Hosting kindly provided by <a href="https://www.igalia.com">Igalia</a>.</li>
			<li><a href="/wpewebkit.org/pr_integrate_mdn_bcd/sitemap/">Site map</a>.</li>
		</ul>
	</div>
</footer>
<script>
let storedInfo = {};
const flagName = 'survey-splash';

function startup(flagName) {
	if (!flagName) {
		console.error('Missing flagName');
		return;
	}
	if (storageAvailable("localStorage")) {
		let currentTime = Date.now();
		let timeOut = 1;
		timeOut *= 86400 * 1000;
		let localStore = localStorage.getItem(flagName);
		if (!localStore) {
			storedInfo = {
				'status': null,
				'datetime': currentTime,
				'pageloads' : 0
			}
		} else {
			storedInfo = JSON.parse(localStore);
		}
		storedInfo.pageloads++;
		localStorage.setItem(flagName, JSON.stringify(storedInfo));

		if (storedInfo.pageloads < 11) return;
		if (storedInfo.status == "Y" || storedInfo.status == "N") return;
		if (storedInfo.status && currentTime - storedInfo.datetime < timeOut) return;

		splash.showModal();
		storedInfo.datetime = currentTime;
	}
}

function storageAvailable(type) {
	// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API
  let storage;
  try {
    storage = window[type];
    const x = "__storage_test__";
    storage.setItem(x, x);
    storage.removeItem(x);
    return true;
  } catch (e) {
    return (
      e instanceof DOMException &&
      // everything except Firefox
      (e.code === 22 ||
        // Firefox
        e.code === 1014 ||
        // test name field too, because code might not be present
        // everything except Firefox
        e.name === "QuotaExceededError" ||
        // Firefox
        e.name === "NS_ERROR_DOM_QUOTA_REACHED") &&
      // acknowledge QuotaExceededError only if there's something already stored
      storage &&
      storage.length !== 0
    );
  }
}

function surveyRedirect() {
	let surveyURL = "https://docs.google.com/forms/d/e/1FAIpQLSchPgMGzuVc9ry5bdxF2uFnW2q3FcrSSqxJdOM4Fd2BD4s7dg/viewform?usp=pp_url&entry.1179679285=WPEWebKit.org+website";	
	if (surveyURL) window.location = surveyURL;
}

document.querySelectorAll('button[is="dis-misser"]').forEach(el => {
	el.addEventListener("click", () => {
		splash.close();
		storedInfo.status = el.getAttribute('id').replace('dismiss-','');
		console.log(storedInfo);
		localStorage.setItem(flagName, JSON.stringify(storedInfo));
		if (storedInfo.status == "Y") surveyRedirect();
	});
});

window.onload = startup(flagName);
</script>


  </body>
</html>
