<!DOCTYPE html>
<html prefix="og: https://ogp.me/ns#" lang="en">

  <head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="">

  <title>Try WPE with Yocto images for Raspberry Pi</title>
  <link rel="canonical" href="https://igalia.github.io/wpewebkit.org/mafm-update-explore/about/yocto-wpe.html">
  <link rel="alternate" type="application/rss+xml" title="" href="https://igalia.github.io/wpewebkit.org/mafm-update-explore/feed.xml">
  <meta property="og:url" content="https://igalia.github.io/wpewebkit.org/mafm-update-explore/about/yocto-wpe.html">
  <meta property="og:title" content="Try WPE with Yocto images for Raspberry Pi">
  <meta property="og:image" content="https://igalia.github.io/wpewebkit.org/mafm-update-explore/assets/twitter_Profile_WhiteBg_400px.png">
  <meta property="og:image:secure_url" content="https://igalia.github.io/wpewebkit.org/mafm-update-explore/assets/twitter_Profile_WhiteBg_400px.png">
  <meta property="og:image:alt" content="WPE logo">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="400">
  <meta property="og:image:height" content="400">
  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2023-01-09T11:04:08.285Z">
  <meta property="article:tag" content="about">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@WPEWebKit">

  <!-- CSS v2 -->
  <link rel="stylesheet" href="/wpewebkit.org/mafm-update-explore/css/v2.css">

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="/wpewebkit.org/mafm-update-explore/vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/wpewebkit.org/mafm-update-explore/css/fonts.css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/wpewebkit.org/mafm-update-explore/css/stylish-portfolio.css">
  <script type="text/javascript">
    window.addEventListener('load',function() {document.querySelector('nav.global>div>.burger').addEventListener('click',menutog)});
    function menutog(e) {
      document.querySelector('nav.global>div>ul').classList.toggle('off');
      e.preventDefault();
    }
  </script>
  <!-- Matomo -->
  <script type="text/javascript">
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//stats.igalia.com/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '6']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
  
</head>


  <body id="page-top" class="subpage">

    <nav class="global">
	<div>
		<a class="igalia logo home" href="/wpewebkit.org/mafm-update-explore/"><img src="/wpewebkit.org/mafm-update-explore/assets/img/logo-blue.svg" alt="WPE"></a>
		<ul class="about off"><li>
			<a class="nav-link" href="/wpewebkit.org/mafm-update-explore/">Home</a>
			</li><li class="currentPage">
			<a class="nav-link" href="/wpewebkit.org/mafm-update-explore/about">Learn & Discover</a>
			</li><li>
			<a class="nav-link" href="/wpewebkit.org/mafm-update-explore/blog">Blog</a>
			</li><li>
			<a class="nav-link" href="/wpewebkit.org/mafm-update-explore/developers">Developers</a>
			</li><li>
			<a class="btn cta" href="/wpewebkit.org/mafm-update-explore/about/explore-wpe.html">Get Started</a>
			</li></ul>
		<a href="#" class="burger">Menu</a>
	</div>
</nav>


    <main>
    <style>
header.page h1 {
	margin-bottom: 0.33em;
	line-height: 1;
}
header.page time {
	font-size: 1.25em;
	opacity: 0.67;
}
</style>
<div itemscope itemtype="http://schema.org/TechArticle">
<meta itemprop="creativeWorkStatus" content="Published">
<meta itemprop="isAccessibleForFree" content="True">
<meta itemprop="publisher" content="WPE Team">
<meta itemprop="author" content="WPE Team">
<meta itemprop="url" content="https://igalia.github.io/wpewebkit.org/mafm-update-explore/about/yocto-wpe.html">

<header class="page full-bleed">
 <h1 itemprop="headline">Try WPE with Yocto images for Raspberry Pi</h1>
 
  
</header>

<div itemprop="articleBody">

<p>One way to easily test WPE is to use Yocto images for Raspberry Pi
devices, write them in a micro-SD card and use them to boot the
device.</p>
<h2 id="getting-and-flashing-the-image-on-a-micro-sd-card" tabindex="-1">Getting and flashing the image on a micro-SD card</h2>
<p>Use the following values:</p>
<ul>
<li><strong>MACHINE</strong>: one of <strong>{raspberrypi3-mesa|raspberrypi4-64-mesa}</strong>
<ul>
<li>raspberrypi3-mesa is 32-bit, to be able to test WPE in a more resource-starved environment</li>
<li>raspberrypi4-64-mesa is 64-bit</li>
</ul>
</li>
<li><strong>SDIMG</strong>: based on the machine, ‘<code>core-image-weston-browsers-${MACHINE}.wic</code>’, e.g. ‘<code>core-image-weston-browsers-raspberrypi3-mesa.wic</code>’</li>
<li><strong>SDCARD_DEV</strong>: whatever the device in your system, e.g. ‘<code>/dev/mmcblk0_REMOVE_THIS</code>’
<ul>
<li><strong>note that PREVIOUS DATA WILL BE ERASED</strong>, be specially careful to not overwrite the wrong disk/card</li>
</ul>
</li>
</ul>
<p>The version of WPE in these images is <strong>2.38.x</strong>.</p>
<h3 id="getting-the-image" tabindex="-1">Getting the image</h3>
<p>Generically, using the substitutions mentioned previously:</p>
<pre><code>wget https://wk-contrib.igalia.com/yocto/meta-webkit/browsers/stable/images/&quot;${MACHINE}&quot;/&quot;${SDIMG}&quot;.{bz2,bmap}
</code></pre>
<h3 id="writing-using-%E2%80%98bmaptool%E2%80%99-(faster%2C-recommended)-or-classic-%E2%80%98dd%E2%80%99" tabindex="-1">Writing using ‘<code>bmaptool</code>’ (faster, recommended) or classic ‘<code>dd</code>’</h3>
<p>Homepage for bmaptool: <a href="https://github.com/intel/bmap-tools">https://github.com/intel/bmap-tools</a></p>
<p>You can typically get this in GNU/Linux-based distributions installing ‘<code>bmap-tools</code>’ package if available.</p>
<h3 id="combined-instructions-for-raspberry-pi-3b%2F3b%2B-(32-bit)-and-raspberry-pi-4-(64-bit)" tabindex="-1">Combined instructions for Raspberry Pi 3B/3B+ (32-bit) and Raspberry Pi 4 (64-bit)</h3>
<p>Choose one of:</p>
<pre><code>MACHINE=raspberrypi3-mesa
</code></pre>
<p>or:</p>
<pre><code>MACHINE=raspberrypi4-64-mesa
</code></pre>
<p>Then to download the image:</p>
<pre><code>SDIMG=&quot;core-image-weston-browsers-${MACHINE}.wic&quot;
SDCARD_DEV=/dev/mmcblk0_REMOVE_THIS
wget https://wk-contrib.igalia.com/yocto/meta-webkit/browsers/stable/images/${MACHINE}/${SDIMG}.{bz2,bmap}
</code></pre>
<p>To write with ‘<code>bmaptool</code>’:</p>
<pre><code>sudo bmaptool copy &quot;${SDIMG}&quot;.bz2 &quot;${SDCARD_DEV}&quot;
</code></pre>
<p>To write with ‘<code>dd</code>’:</p>
<pre><code>bzip2 -dc &quot;${SDIMG}&quot;.bz2 | sudo dd of=&quot;${SDCARD_DEV}&quot; bs=4k status=progress
</code></pre>
<h2 id="set-up" tabindex="-1">Set-up</h2>
<p>After writing the micro-SD card and using it to boot the device, it
should boot to a graphical environment, using Weston (from Wayland),
with a minimal top panel bar and some icons within it.</p>
<p>To test WPE networking is needed, either by pluggin-in an ethernet
cable (with DHCP networking should set-up automatically), or by
clicking the “wireless” icon in the panel, that brings up a basic
script to help to set the network up (selecting SSID and password).</p>
<h2 id="testing-and-demos" tabindex="-1">Testing and demos</h2>
<p>After having the network working, the browser (<code>cog</code>) can be launched
from one of the icons in the panel, or alternatively by opening a
terminal with another of the icons and launching it from the command
line.</p>
<p>This is a quick list of environment variables and key bindings that
can be used with <code>cog</code> to perform certain actions or change its
behaviour (e.g. toggle fullscreen, reload, exit):</p>
<ul>
<li><a href="https://github.com/Igalia/cog/blob/master/docs/platform-wl.md">https://github.com/Igalia/cog/blob/master/docs/platform-wl.md</a></li>
</ul>
<p>Example:</p>
<pre><code>COG_PLATFORM_WL_VIEW_FULLSCREEN=1 cog -P wl &quot;https://www.wikipedia.org/&quot;
</code></pre>
<h3 id="demos" tabindex="-1">Demos</h3>
<p>This is a short list of suggested demos that can be used to check WPE
in action on the device and its performance.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:center">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">CSS transformation and animations in <a href="https://webkit.org/blog-files/3d-transforms/poster-circle.html">WebKit poster circle example</a></td>
<td style="text-align:center"><img src="../assets/balena-wpe/postercircle.gif" alt="Image: WebKit poster circle demo" title="WebKit poster circle demo"></td>
</tr>
<tr>
<td style="text-align:left">Playing an embedded video from <a href="https://wpewebkit.org/">wpewebkit.org</a></td>
<td style="text-align:center"><img src="../assets/balena-wpe/wpewebkitorg.gif" alt="Image: Embedded video demo" title="Embedded video demo"></td>
</tr>
<tr>
<td style="text-align:left">Playing <a href="https://bouncyballs.org/">BouncyBalls</a></td>
<td style="text-align:center"><img src="../assets/balena-wpe/bouncyballs.gif" alt="Image: Playing BouncyBalls demo" title="Playing BouncyBalls demo"></td>
</tr>
<tr>
<td style="text-align:left">Rendering WebGL <a href="https://webglsamples.org/aquarium/aquarium.html">Aquarium</a> demo</td>
<td style="text-align:center"><img src="../assets/balena-wpe/webgl_aquarium.gif" alt="Image: Rendering WebGL Aquarium demo" title="Rendering WebGL Aquarium demo"></td>
</tr>
<tr>
<td style="text-align:left">Rendering WebGL <a href="https://mrdoob.neocities.org/023/">Abstract Shapes</a></td>
<td style="text-align:center"><img src="../assets/balena-wpe/webgl_abstractshapes.gif" alt="Image: Rendering WebGL Abstract Shapes demo" title="Rendering WebGL Abstract Shapes demo"></td>
</tr>
</tbody>
</table>




</div>

    </main>

    <footer class="global">
	<b></b>
	<div>
		<a href="/wpewebkit.org/mafm-update-explore/" class="igalia logo home"><img src="/wpewebkit.org/mafm-update-explore/assets/img/logo-white.svg" alt="WPE"></a>
		<ul>
			<li>Connect on <a href="https://twitter.com/WPEWebKit">Twitter</a></li>
			<li>mailing list: <a href="https://lists.webkit.org/mailman/listinfo/webkit-wpe">webkit-wpe</a></li>
			<li>OFTC: <a href="https://webchat.oftc.net/?channels=wpe">#wpe</a></li>
			<li>Matrix: <a href="https://matrix.to/#/#wpe:matrix.org">#wpe:matrix.org</a></li>
		</ul>
		<ul>
			<li>Copyright &copy; 2018-2023 The WPE WebKit Team</li>
			<li>Hosting kindly provided by <a href="https://www.igalia.com">Igalia</a>.</li>
		</ul>
	</div>
</footer>


  </body>
</html>
